<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>点医台医生端</title>
        <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
        <meta name="format-detection" content="telephone=no,email=no"/>
        <link type="text/css" rel="stylesheet" href="css/lib/css/mui.min.css" rel="external nofollow"/>
         <link rel="stylesheet" type="text/css" href="lib/iconfont.css"/>
          <link rel="stylesheet" type="text/css" href="css/style.css"/>
            <link rel="stylesheet" type="text/css" href="doctorcore/css/style.css"/>
         <link rel="stylesheet" type="text/css" href="doctorcore/css/doctor-publish.css"/>
        <script type="text/javascript" src="lib/jquery-2.1.0.js"></script>
         <script type="text/javascript" src="js/getopenid.js"></script>
         <script type="text/javascript" src="js/api.js"></script>
        <script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
     
    </head>
    <body>
    	 <header id="head">
            	 
            </header>
    	<!--返回-->
    	<div class="doctor-money-fanhui-box">
    		<!--<a href="javascript:window,history.back();"> -->
    		<a href="#">
    		<i class="iconfont icon-fanhui1"></i>
    		</a>
    		 <span>发布文章</span>
    	</div>
    	<!--返回-->
    	 <!--发表信息-->
    	 <div class="patient-info-box">
    	 	 
    	 <!--输入内容-->
    	 <div class="doctor-reply-info-box">
    	 	<div class="reply-title"><input type="text" placeholder="输入标题"></div>
    	 	<div class="textarea-box">
    	 		<textarea name="" rows="" cols="" placeholder="输入文章内容，字数不能超过100个字"></textarea>
    	 	</div>
    	 	 <!--上传图片-->
    	 	 <form id="uploadForm" enctype="multipart/form-data" method="post">
            	 <!--<input type="file" name="file" onchange="showPreview(this)" class="man-input" id="file" accept="image/*"/>-->
            	 <input type="file" name="file" class="man-input" id="file" accept="image/*"/>
            	 <!-- <img id="portrait" src="images/bag/morentouxiang.png"  class="man-img" />-->
            	  </form>
            	    <div class="img"> 
            	    <img id="img01" src="evendoctor/images/shangchuang.png"  class="man-img" />
            	    </div>
    	 </div>
    	 </div>
    	 <!--价格确定-->
    	 <div class="money-box">
    	 	<div class="money-title">
    	 		<span>设置文章阅读价格</span><button class="fee-btn">不设价免费</button><button class="fee-btn01">设价</button>
    	 	</div>
    	 	<div class="money-content">
    	 		<!--<input type="text"  placeholder="请输入价格" data-money='1' maxlength="10" onkeyup="(this.v=function(){this.value=this.value.replace(/[^0-9-]+/,'');}).call(this)" onblur="this.v();"/><span>元</span>-->
    	 	<input type="text"  placeholder="请输入价格" data-money='1' maxlength="10"/><span>元</span>
    	 	</div>
    	 	<div class="red-tips">价格不能超过10000元</div>
    	 </div>
    	 <!--发表按钮-->
    	 <div class="reply-btn">
    	 		<button>发布</button>
    	 </div>
    	 	<!--保留编辑的内容-->
    	 	<div class="mask-box">
    	 		<div class="draft-box">
    	 			<div class="draft-content">保留此次编辑？</div>
    	 			<div class="draft-btn">
    	 				<span class="yes-draft">保留</span> <span class="no-draft">不保留</span> 
    	 			</div>
    	 		</div>
    	 	</div>
    	 	
     <script type="text/javascript" src="doctorcore/js/style.js"></script>
     <script type="text/javascript" src="doctorcore/js/doctor-publish.js"></script>
     <script lang="javascript">
	//上传用户头像
	
    $(document).ready(function(){
        $("input[name='file']").change(function(){
            //FormData对象，
            //可以把form中所有表单元素的name与value组成一个queryString，提交到后台。
            //在使用Ajax提交时，使用FormData对象可以减少拼接queryString的工作量
            var formData = new FormData();
            console.log($("input[name='file']")[0].files[0])
             formData.append("file",$("input[name='file']")[0].files[0]);
               
              console.log(formData)
            $.ajax({
            		headers:{
      'Authorization':localStorage.getItem("token"),
       },
                url:apiurl+"doctor/verify/upload",
                type:'post',
                data: formData,
                cache: false,
                processData: false,
                contentType: false,
                success:function(data){
                	 console.log(data);
                	$('.man-img').attr("src",imgurl+data.path)
                	 $('.man-img').attr("data-url",data.path)
                    
//                  if(data.status=="fail"){
//                      alert(data.message);
//                  }
//                  #根据上传成功并返回压缩后的图片url，更新img标签src属性
//                  if(data.status=="success"){
//                      $(".avatar img").attr("src",data.url+"?"+new Date().getTime());
//                  }
                },error:function(e){
                    //console.log(e);
                }
            });
        });
    });
   
   
     
</script>

    </body>
    
</html> 